 <!DOCTYPE html>
 <html lang="de">
 <head>
   <meta charset="UTF-8">
     <title>Geschenke-Zuteilung für Familien</title>
       <style>
           body { font-family: Arial, sans-serif; margin: 2em; background: #f8fafd; }
               h2 { color: #276678; }
                   label, select, input, button { margin: 0.5em 0; display: block; }
                       #result { margin-top: 1em; font-weight: bold; color: #276678; }
                           .hinweis { font-size: 0.95em; color: #888; margin-bottom: 1em; }
                               form { background: #fff; padding: 1em 2em; border-radius: 8px; max-width: 350px; box-shadow: 0 2px 8px #0002; }
                                 </style>
                                 </head>
                                 <body>
                                   <h2>Wer bekommt dein Geschenk?</h2>
                                     <div class="hinweis">
                                         Wähle deinen Namen und gib das passende Familienpasswort ein.<br>
                                             Die Zuteilung bleibt das ganze Jahr gleich und ist für jede Familie getrennt.
                                               </div>
                                                 <form id="giftForm">
                                                     <label for="memberSelect">Dein Name:</label>
                                                         <select id="memberSelect" required>
                                                               <option value="">Bitte Namen auswählen</option>
                                                                   </select>
                                                                       <label for="passwordInput">Familien-Passwort:</label>
                                                                           <input type="password" id="passwordInput" required>
                                                                               <button type="submit">Empfänger anzeigen</button>
                                                                                 </form>
                                                                                   <div id="result"></div>
                                                                                     <script>
                                                                                         // Familienmitglieder (beliebig anpassen!)
                                                                                             const FAMILY_MEMBERS = [
                                                                                                   { name: "Anna", index: 0 },
                                                                                                         { name: "Ben", index: 0 },
                                                                                                               { name: "Clara", index: 1 },
                                                                                                                     { name: "David", index: 1 },
                                                                                                                           { name: "Eva", index: 2 },
                                                                                                                                 { name: "Felix", index: 2 }
                                                                                                                                       // Weitere Mitglieder hier ergänzen
                                                                                                                                           ];

                                                                                                                                               // Passwort pro Familien-Index (beliebig anpassen!)
                                                                                                                                                   const FAMILY_PASSWORDS = {
                                                                                                                                                         0: "schnee",    // Familie 0
                                                                                                                                                               1: "kerze",     // Familie 1
                                                                                                                                                                     2: "stern"      // Familie 2
                                                                                                                                                                           // Weitere Index-Passwörter hier ergänzen
                                                                                                                                                                               };

                                                                                                                                                                                   // Auswahlliste füllen
                                                                                                                                                                                       const memberSelect = document.getElementById("memberSelect");
                                                                                                                                                                                           FAMILY_MEMBERS.forEach((member, i) => {
                                                                                                                                                                                                 const opt = document.createElement("option");
                                                                                                                                                                                                       opt.value = i; // Array-Position
                                                                                                                                                                                                             opt.textContent = member.name;
                                                                                                                                                                                                                   memberSelect.appendChild(opt);
                                                                                                                                                                                                                       });

                                                                                                                                                                                                                           // Seeded Shuffle: stabile Reihenfolge für das Jahr
                                                                                                                                                                                                                               function seededRandom(seed) {
                                                                                                                                                                                                                                     let x = Math.sin(seed) * 10000;
                                                                                                                                                                                                                                           return x - Math.floor(x);
                                                                                                                                                                                                                                               }
                                                                                                                                                                                                                                                   function seededShuffle(array, seed) {
                                                                                                                                                                                                                                                         let arr = array.slice();
                                                                                                                                                                                                                                                               for (let i = arr.length - 1; i > 0; i--) {
                                                                                                                                                                                                                                                                       seed = seededRandom(seed + i) * 10000;
                                                                                                                                                                                                                                                                               let j = Math.floor(seed % (i + 1));
                                                                                                                                                                                                                                                                                       [arr[i], arr[j]] = [arr[j], arr[i]];
                                                                                                                                                                                                                                                                                             }
                                                                                                                                                                                                                                                                                                   return arr;
                                                                                                                                                                                                                                                                                                       }

                                                                                                                                                                                                                                                                                                           // Zuteilung (Geschenk geht zu anderem Familien-Index)
                                                                                                                                                                                                                                                                                                               function assignRecipients(members, seed) {
                                                                                                                                                                                                                                                                                                                     let indices = members.map((_, i) => i);
                                                                                                                                                                                                                                                                                                                           let shuffled;
                                                                                                                                                                                                                                                                                                                                 // Es darf kein Geschenk an gleiche Familie gehen!
                                                                                                                                                                                                                                                                                                                                       do {
                                                                                                                                                                                                                                                                                                                                               shuffled = seededShuffle(indices, seed);
                                                                                                                                                                                                                                                                                                                                                     } while (
                                                                                                                                                                                                                                                                                                                                                             shuffled.some((shuffIdx, i) => 
                                                                                                                                                                                                                                                                                                                                                                       members[shuffIdx].index === members[i].index
                                                                                                                                                                                                                                                                                                                                                                               )
                                                                                                                                                                                                                                                                                                                                                                                     );
                                                                                                                                                                                                                                                                                                                                                                                           let assignments = {};
                                                                                                                                                                                                                                                                                                                                                                                                 indices.forEach((idx, i) => {
                                                                                                                                                                                                                                                                                                                                                                                                         assignments[idx] = shuffled[i];
                                                                                                                                                                                                                                                                                                                                                                                                               });
                                                                                                                                                                                                                                                                                                                                                                                                                     return assignments;
                                                                                                                                                                                                                                                                                                                                                                                                                         }

                                                                                                                                                                                                                                                                                                                                                                                                                             document.getElementById("giftForm").addEventListener("submit", function(e) {
                                                                                                                                                                                                                                                                                                                                                                                                                                   e.preventDefault();
                                                                                                                                                                                                                                                                                                                                                                                                                                         const memberArrayIdx = parseInt(memberSelect.value, 10);
                                                                                                                                                                                                                                                                                                                                                                                                                                               const member = FAMILY_MEMBERS[memberArrayIdx];
                                                                                                                                                                                                                                                                                                                                                                                                                                                     const password = document.getElementById("passwordInput").value;
                                                                                                                                                                                                                                                                                                                                                                                                                                                           const correctPassword = FAMILY_PASSWORDS[member.index];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                 if (password !== correctPassword) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                         document.getElementById("result").textContent = "Falsches Familienpasswort!";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             const year = new Date().getFullYear();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   const assignments = assignRecipients(FAMILY_MEMBERS, year);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         const recipientIdx = assignments[memberArrayIdx];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               const recipient = FAMILY_MEMBERS[recipientIdx];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     document.getElementById("result").textContent =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             `Du schenkst an: ${recipient.name}`;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </html>